{% extends "core/base.html" %}

{% block title %}Ajouter un créneau{% endblock %}

{% block content %}
    <h1>Ajouter un créneau</h1>
    <form method="post">
        {% csrf_token %}
        <label for="date">Date :</label>
        <input type="date" name="date" id="date" required>
        <br>
        <label for="competence">Compétence :</label>
        <select name="competence" id="competence" required>
            {% for competence in competences %}
                <option value="{{ competence.id }}">{{ competence.name }}</option>
            {% endfor %}
        </select>
        <br>
        <label for="purpose">Objectif :</label>
        <select name="purpose" id="purpose" onchange="toggleDescriptionField()">
            <option value="aid">Pour aider</option>
            <option value="request">Demande d’aide</option>
        </select>
        <br>
        <div id="descriptionField" style="display: none;">
            <label for="description">Description de l'activité :</label>
            <textarea name="description" id="description"></textarea>
        </div>
        <br>
        <button type="submit">Enregistrer le créneau</button>
    </form>

    <script>
        function toggleDescriptionField() {
            const purpose = document.getElementById('purpose').value;
            const descriptionField = document.getElementById('descriptionField');
            if (purpose === 'request') {
                descriptionField.style.display = 'block';
            } else {
                descriptionField.style.display = 'none';
            }
        }
    </script>
{% endblock %}
